{{ 'article.css' | asset_url | stylesheet_tag }}

{% for block in section.blocks %}
  {% case block.type %}

   {% when 'featured_image' %}

      {% if section.settings.enabled_image %}
        {% if article.image %}
         <div class="article-image-wrapper image-{{ block.settings.image_height }}">
           {{ article.image | image_url: width: 1500 | image_tag: class: 'article-image' }}
         </div>
        {% endif %}
      {% endif %}

   {% when 'title' %}

      {% if section.settings.enabled_title %}
        <header class="title-align-{{ block.settings.title_align }}">
          <h1 class="title">{{ article.title | escape }}</h1>

          <div class="article-meta">
            {% if section.settings.enabled_date %}
              <span class="meta-item">
                <svg class="meta-ic" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true"><path d="M7 2a1 1 0 0 1 1 1v1h8V3a1 1 0 1 1 2 0v1h1a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1V3a1 1 0 0 1 1-1Zm12 7H5v10h14V9Z"/></svg>
                {{- article.published_at | time_tag: format: 'date' -}}
              </span>
            {% endif %}

            {% if section.settings.enabled_auth %}
              <span class="meta-item">
               <svg class="meta-ic" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5z"/></svg>
               {{ article.author }}
              </span>
            {% endif %}
          </div>
        </header>
      {% endif %}

   {% when 'content' %}

      <div class="main-content {% if block.settings.enable_dropcap %}dropcap{% endif %}">
        {{ article.content }}
      </div>

   {% when 'share' %}
      {% assign share_url = shop.url | append: article.url %}
  {% assign share_title = article.title | url_param_escape %}
  {% assign share_image = article.image | image_url: width: 1200 %}

  <div class="share-bar">
    <span class="share-label">{{ block.settings.share_label }}</span>

    <a class="share-btn fb" href="https://www.facebook.com/sharer/sharer.php?u={{ share_url | url_encode }}" target="_blank" rel="noopener" aria-label="Share on Facebook">F</a>

    <a class="share-btn tw" href="https://twitter.com/intent/tweet?url={{ share_url | url_encode }}&text={{ share_title }}" target="_blank" rel="noopener" aria-label="Share on X">X</a>

    <a class="share-btn li" href="https://www.linkedin.com/sharing/share-offsite/?url={{ share_url | url_encode }}" target="_blank" rel="noopener" aria-label="Share on LinkedIn">in</a>

    {% if article.image %}
      <a class="share-btn pn" href="https://pinterest.com/pin/create/button/?url={{ share_url | url_encode }}&media={{ share_image | url_encode }}&description={{ share_title }}" target="_blank" rel="noopener" aria-label="Share on Pinterest">P</a>
    {% endif %}

    <button type="button" class="share-btn copy" data-share="{{ share_url }}" aria-label="Copy link">â§‰</button>
  </div>

   {% else %}
     
  {% endcase %}

{% endfor %}



{% if blog.comments_enabled? %}
  <h2>{{ 'blog.article_comments' | t }}</h2>

  <div id="comments">
    {% paginate article.comments by 10 %}
      {% for comment in article.comments %}
        <div>
          <p>{{ comment.author }}</p>
          <p>
            {{- comment.created_at | time_tag: format: 'date' -}}
          </p>
          <p>{{ comment.content }}</p>
        </div>
      {% endfor %}

      {{ paginate | default_pagination: anchor: 'comments' }}
    {% endpaginate %}
  </div>

  {% form 'new_comment', article %}
    <h2>{{ 'blog.comment_form_title' | t }}</h2>

    {{ form.errors | default_errors }}

    <div>
      <label for="author">{{ 'blog.comment_form_name' | t }}</label>
      <input type="text" name="comment[author]" id="author" value="{{ form.author }}" required>
    </div>

    <div>
      <label for="email">{{ 'blog.comment_form_email' | t }}</label>
      <input type="email" name="comment[email]" id="email" value="{{ form.email }}" required>
    </div>

    <div>
      <label for="body">{{ 'blog.comment_form_body' | t }}</label>
      <textarea name="comment[body]" id="body" required>{{ form.body }}</textarea>
    </div>

    <input type="submit" value="{{ 'blog.comment_form_submit' | t }}">
  {% endform %}
{% endif %}

{% schema %}
{
  "name": "t:general.article",
  "settings": [
    {
      "type": "checkbox",
      "id": "enabled_image",
      "label": "Show Image",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enabled_auth",
      "label": "Show Author",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enabled_date",
      "label": "Show Date",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enabled_title",
      "label": "Show Title",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "featured_image",
      "name": "Featured Image",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "image_height",
          "options": [
            {
              "value": "small",
              "label": "Small"
            },
            {
              "value": "medium",
              "label": "Medium"
            },
            {
              "value": "large",
              "label": "Large"
            }
          ],
          "default": "small",
          "label": "Set Image Height"
        }
      ]
    },
    {
      "type": "title",
      "name": "Title",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "title_align",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            },
          ],
          "label": "Title Align"
        }
      ]
    },
    {
      "type": "content",
      "name": "Content",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "enable_dropcap",
          "label": "Show DropCap",
          "default": false
        }
      ]
    },
    {
      "type": "share",
      "name": "Share",
      "limit": 2,
      "settings": [
        {
          "type": "text",
          "id": "share_label",
          "label": "Text",
          "default": "Share Button"
        }
      ]
    }
  ]
}
{% endschema %}
