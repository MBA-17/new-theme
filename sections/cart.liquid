{{ 'cart.css' | asset_url | stylesheet_tag }}

{%- if cart.item_count > 0 -%}
  <div class="product-cart">
    <h1>{{ 'cart.title' | t }}</h1>

    <form action="{{ routes.cart_url }}" method="post">
      <table>
        <thead>
          <tr>
            <th></th>
            <th>{{ 'cart.product' | t }}</th>
            <th>{{ 'cart.quantity' | t }}</th>
            <th>{{ 'cart.price' | t }}</th>
            <th>{{ 'cart.total' | t }}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart.items %}
            <tr>
              <td>
                <a href="{{ item.url }}">{% render 'image', image: item.image, url: item.url, size: '100x100' %}</a>
              </td>
              <td>
                <p><a href="{{ item.url }}">{{ item.product.title }}</a></p>
                {%- if item.variant.title != 'Default Title' -%}
                  <p class="product-variant">{{ item.variant.title }}</p>
                {%- endif -%}
                <a href="{{ item.url_to_remove }}" class="remove-item">{{ 'cart.remove' | t }}</a>
              </td>
              <td>
                <input type="number" name="updates[]" value="{{ item.quantity }}" min="0" class="quantity-input">
              </td>
              <td>{{ item.price | money }}</td>
              <td>{{ item.line_price | money }}</td>
              <td></td> {# This column could be for something else, or removed if not needed #}
            </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4" class="text-right"><strong>{{ 'cart.subtotal' | t }}:</strong></td>
            <td><strong>{{ cart.total_price | money }}</strong></td>
            <td></td>
          </tr>
        </tfoot>
      </table>

      <div class="cart-actions">
        <input type="submit" value="{{ 'cart.update' | t }}" class="button update-cart">
        <input type="submit" name="checkout" value="{{ 'cart.checkout' | t }}" class="button checkout-button">
      </div>
    </form>
  </div>
{%- else -%}
  <div class="empty-cart">
    <div class="cart-header">
      {%- if section.settings.show_empty_cart_image -%}
        <img src="{{ section.settings.empty_cart_image | img_url: 'medium' }}" alt="{{ section.settings.empty_cart_heading }}" class="img-fluid mb-4 mr-3">
      {%- else -%}
        <img src="https://cdn.shopify.com/s/files/1/0533/2088/files/empty-cart-icon.png?v=1616785642" width="130" height="130" class="img-fluid mb-4 mr-3">
      {%- endif -%}
    </div>
    <div class="cart-body">
      <h1 class="cart-title">{{ section.settings.empty_cart_heading }}</h1>
      <p class="cart-pickup-line">{{ section.settings.empty_cart_subheading }}</p>
      <a href="{{ routes.all_products_collection_url }}" class="cart-shop button">{{ section.settings.empty_cart_button_text }}</a>
    </div>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "t:general.cart",
  "settings": [
    {
      "type": "header",
      "content": "Empty Cart Settings"
    },
    {
      "type": "checkbox",
      "id": "show_empty_cart_image",
      "label": "Show empty cart image",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "empty_cart_image",
      "label": "Empty cart image",
      "info": "Appears when the cart is empty. Defaults to a shopping bag icon."
    },
    {
      "type": "text",
      "id": "empty_cart_heading",
      "label": "Empty cart heading",
      "default": "Your cart is empty"
    },
    {
      "type": "text",
      "id": "empty_cart_subheading",
      "label": "Empty cart subheading",
      "default": "Add something to make me happy!"
    },
    {
      "type": "text",
      "id": "empty_cart_button_text",
      "label": "Empty cart button text",
      "default": "Continue Shopping"
    }
  ]
}
{% endschema %}